<!DOCTYPE html>
<html lang="en" data-theme="retro-neon">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MarkVoid — Line Editor</title>
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/13.0.2/markdown-it.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css" id="hljs-theme">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>

  <!-- MENU BAR -->
  <nav id="menubar">
    <div class="brand">MARKVOID</div>
    <div class="menus">

      <div class="menu-item">
        <button class="menu-trigger">File</button>
        <div class="dropdown">
          <button onclick="app.newDocument()">New</button>
          <button onclick="app.uploadFile()">Upload .md</button>
          <button onclick="app.downloadFile()">Download .md</button>
          <button onclick="app.exportHtml()">Export as HTML</button>
          <div class="dropdown-sep"></div>
          <button onclick="app.toggleZen()">Zen Mode <span class="kbd">F11</span></button>
        </div>
      </div>

      <div class="menu-item">
        <button class="menu-trigger">Edit</button>
        <div class="dropdown">
          <button onclick="app.undo()">Undo <span class="kbd">Ctrl+Z</span></button>
          <button onclick="app.redo()">Redo <span class="kbd">Ctrl+Y</span></button>
          <div class="dropdown-sep"></div>
          <button onclick="app.openFind()">Find <span class="kbd">Ctrl+F</span></button>
          <button onclick="app.openFindReplace()">Find &amp; Replace <span class="kbd">Ctrl+H</span></button>
          <button onclick="app.openGoToLine()">Go to Line <span class="kbd">Ctrl+G</span></button>
          <div class="dropdown-sep"></div>
          <button onclick="app.duplicateLine()">Duplicate Line <span class="kbd">Ctrl+D</span></button>
          <button onclick="app.moveLineUp()">Move Line Up <span class="kbd">Alt+↑</span></button>
          <button onclick="app.moveLineDown()">Move Line Down <span class="kbd">Alt+↓</span></button>
          <button onclick="app.toggleComment()">Toggle Comment <span class="kbd">Ctrl+/</span></button>
          <div class="dropdown-sep"></div>
          <button onclick="app.toggleBold()">Bold <span class="kbd">Ctrl+B</span></button>
          <button onclick="app.toggleItalic()">Italic <span class="kbd">Ctrl+I</span></button>
          <button onclick="app.toggleStrike()">Strikethrough <span class="kbd">Ctrl+Shift+X</span></button>
          <button onclick="app.toggleInlineCode()">Inline Code <span class="kbd">Ctrl+`</span></button>
          <button onclick="app.insertLink()">Insert Link <span class="kbd">Ctrl+K</span></button>
        </div>
      </div>

      <div class="menu-item">
        <button class="menu-trigger">Tools</button>
        <div class="dropdown">
          <button onclick="app.bulletify()">Bulletify</button>
          <button onclick="app.insertTaskList()">Insert Task List</button>
          <button onclick="app.insertTable()">Insert Table</button>
          <button onclick="app.indentLines()">Indent <span class="kbd">Ctrl+]</span></button>
          <button onclick="app.outdentLines()">Outdent <span class="kbd">Ctrl+[</span></button>
          <button onclick="app.sortLines()">Sort Lines</button>
          <div class="dropdown-sep"></div>
          <button onclick="app.insertTOC()">Insert Table of Contents</button>
          <button onclick="app.insertTimestamp()">Insert Timestamp</button>
          <button onclick="app.unicodeToAscii()">Unicode → ASCII</button>
          <div class="dropdown-sep"></div>
          <button onclick="app.copyAsHtml()">Copy as HTML</button>
          <button onclick="app.showStats()">Word Count &amp; Stats</button>
          <button onclick="app.toggleWordWrap()">Toggle Word Wrap <span class="kbd">Alt+Z</span></button>
          <button onclick="app.toggleLineNumbers()">Toggle Line Numbers</button>
          <div class="dropdown-sep"></div>
          <button onclick="app.printNote()">Print <span class="kbd">Ctrl+P</span></button>
        </div>
      </div>

      <div class="menu-item">
        <button class="menu-trigger">Theme</button>
        <div class="dropdown">
          <button onclick="app.setTheme('retro-neon')" data-theme-opt="retro-neon">⬡ Retro Neon</button>
          <button onclick="app.setTheme('black')" data-theme-opt="black">● Black</button>
          <button onclick="app.setTheme('white')" data-theme-opt="white">○ White</button>
          <button onclick="app.setTheme('red')" data-theme-opt="red">◆ Red</button>
          <div class="dropdown-sep"></div>
          <button onclick="app.setTheme('dracula')" data-theme-opt="dracula">◈ Dracula</button>
          <button onclick="app.setTheme('solarized')" data-theme-opt="solarized">◉ Solarized Dark</button>
          <button onclick="app.setTheme('ocean')" data-theme-opt="ocean">◎ Ocean</button>
          <button onclick="app.setTheme('amber')" data-theme-opt="amber">◐ Amber</button>
          <button onclick="app.setTheme('nord')" data-theme-opt="nord">◑ Nord</button>
          <button onclick="app.setTheme('sepia')" data-theme-opt="sepia">◒ Sepia</button>
        </div>
      </div>

    </div>
    <div id="autosave-indicator" class="saved">● SAVED</div>
  </nav>

  <!-- BODY WRAPPER (sidebar + editor) -->
  <div id="body-wrap">

  <!-- SIDEBAR -->
  <aside id="sidebar">
    <div id="sidebar-header">
      <span id="sidebar-title">NOTES</span>
      <button id="btn-search-notes" title="Search notes (Ctrl+Shift+F)" onclick="app.openNoteSearch()">⌕</button>
      <button id="btn-new-note" title="New note" onclick="notes.createNote()">＋</button>
    </div>
    <div id="notes-list"></div>
  </aside>

  <!-- SIDEBAR COLLAPSE BUTTON -->
  <button id="sidebar-collapse" title="Toggle sidebar" onclick="app.toggleSidebar()">◀</button>

  <!-- RESIZE HANDLE -->
  <div id="sidebar-resize"></div>

  <!-- EDITOR PANE -->
  <main id="editor-pane">
    <div id="line-container"></div>
  </main>

  </div><!-- /body-wrap -->

  <!-- STATUS BAR -->
  <footer id="statusbar">
    <span id="status-pos">Ln 1, Col 1</span>
    <span id="status-words">0 words</span>
    <span id="status-lines">0 lines</span>
    <span id="status-wrap" style="margin-left:auto">WRAP: OFF</span>
    <span class="status-sep">|</span>
    <span id="font-controls">
      <button class="font-btn" onclick="app.changeFontSize(-1)" title="Decrease font size">A−</button>
      <span id="font-size-display">14px</span>
      <button class="font-btn" onclick="app.changeFontSize(1)" title="Increase font size">A+</button>
    </span>
  </footer>

  <!-- HIDDEN FILE INPUT -->
  <input type="file" id="file-input" accept=".md" style="display:none">

  <!-- FIND / REPLACE MODAL -->
  <div id="find-modal" class="modal hidden">
    <div class="modal-box">
      <div class="modal-header">
        <span class="modal-title" id="modal-title">Find</span>
        <button class="modal-close" onclick="app.closeFind()">✕</button>
      </div>
      <div class="modal-body">
        <div class="field-row">
          <label>Find</label>
          <input type="text" id="find-input" placeholder="Search…">
        </div>
        <div class="field-row" id="replace-row" style="display:none">
          <label>Replace</label>
          <input type="text" id="replace-input" placeholder="Replace with…">
        </div>
        <div class="options-row">
          <label><input type="checkbox" id="opt-case"> Case sensitive</label>
          <label><input type="checkbox" id="opt-regex"> Regex</label>
        </div>
        <div class="btn-row">
          <button class="btn-primary" onclick="app.findHighlight()">Highlight All</button>
          <button class="btn-secondary" id="replace-one-btn" style="display:none" onclick="app.replaceOne()">Replace</button>
          <button class="btn-secondary" id="replace-all-btn" style="display:none" onclick="app.replaceAll()">Replace All</button>
        </div>
      </div>
    </div>
  </div>

  <!-- STATS MODAL -->
  <div id="stats-modal" class="modal hidden">
    <div class="modal-box">
      <div class="modal-header">
        <span class="modal-title">STATS</span>
        <button class="modal-close" onclick="app.closeStats()">✕</button>
      </div>
      <div class="modal-body" id="stats-body"></div>
    </div>
  </div>

  <!-- NOTE SEARCH MODAL -->
  <div id="note-search-modal" class="modal hidden">
    <div class="modal-box">
      <div class="modal-header">
        <span class="modal-title">SEARCH NOTES</span>
        <button class="modal-close" onclick="app.closeNoteSearch()">✕</button>
      </div>
      <div class="modal-body">
        <div class="field-row">
          <label>Search</label>
          <input type="text" id="note-search-input" placeholder="Search across all notes…" oninput="app.doNoteSearch()">
        </div>
        <div id="note-search-results"></div>
      </div>
    </div>
  </div>

  <!-- INSERT LINK MODAL -->
  <div id="link-modal" class="modal hidden">
    <div class="modal-box">
      <div class="modal-header">
        <span class="modal-title">INSERT LINK</span>
        <button class="modal-close" onclick="app.closeLink()">✕</button>
      </div>
      <div class="modal-body">
        <div class="field-row">
          <label>Text</label>
          <input type="text" id="link-text" placeholder="Link text">
        </div>
        <div class="field-row">
          <label>URL</label>
          <input type="text" id="link-url" placeholder="https://…">
        </div>
        <div class="btn-row">
          <button class="btn-primary" onclick="app.commitLink()">Insert</button>
          <button class="btn-secondary" onclick="app.closeLink()">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <!-- GO TO LINE MODAL -->
  <div id="goto-modal" class="modal hidden">
    <div class="modal-box modal-box--narrow">
      <div class="modal-header">
        <span class="modal-title">GO TO LINE</span>
        <button class="modal-close" onclick="app.closeGoToLine()">✕</button>
      </div>
      <div class="modal-body">
        <div class="field-row">
          <label>Line</label>
          <input type="number" id="goto-input" min="1" placeholder="Line number…">
        </div>
        <div class="btn-row">
          <button class="btn-primary" onclick="app.commitGoToLine()">Go</button>
          <button class="btn-secondary" onclick="app.closeGoToLine()">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <!-- INSERT TABLE MODAL -->
  <div id="table-modal" class="modal hidden">
    <div class="modal-box modal-box--narrow">
      <div class="modal-header">
        <span class="modal-title">INSERT TABLE</span>
        <button class="modal-close" onclick="app.closeTableModal()">✕</button>
      </div>
      <div class="modal-body">
        <div class="field-row">
          <label>Columns</label>
          <input type="number" id="table-cols" min="1" max="12" value="3">
        </div>
        <div class="field-row">
          <label>Rows</label>
          <input type="number" id="table-rows" min="1" max="50" value="3">
        </div>
        <div class="btn-row">
          <button class="btn-primary" onclick="app.commitInsertTable()">Insert</button>
          <button class="btn-secondary" onclick="app.closeTableModal()">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <div id="modal-overlay" class="hidden" onclick="app.closeAllModals()"></div>

  <script src="app.js"></script>
</body>
</html>

